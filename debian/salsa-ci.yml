include:
  - https://salsa.debian.org/salsa-ci-team/pipeline/raw/master/salsa-ci.yml
  - https://salsa.debian.org/salsa-ci-team/pipeline/raw/master/pipeline-jobs.yml

variables:
  SALSA_CI_DISABLE_APTLY: 0

# Override pipeline-jobs.yml with amended definitions.

autopkgtest:
  extends: .test-autopkgtest
  variables:
    SALSA_CI_AUTOPKGTEST_ARGS: '--setup-commands=debian/salsa/add-repositories.sh'

piuparts:
  extends: .test-piuparts
  variables:
    SALSA_CI_PIUPARTS_PRE_INSTALL_SCRIPT: 'debian/salsa/add-repositories.sh'

aptly:
  extends: .publish-aptly
  before_script:
    - debian/salsa/add-repositories.sh
    - debian/salsa/get-packages.sh "${WORKING_DIR}"
  variables:
    GIT_STRATEGY: fetch
